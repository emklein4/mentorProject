<!DOCTYPE html>
<html>
<head>

    <meta charset="utf-8" />
    <title></title>
    <!--DO NOT FORGET THIS SCRIPT TAG SO YOU CAN USE JQUERY!!!!!-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="./style.css" rel="stylesheet" type="text/css"/>   
    <script src="./Script.js"></script>
	<meta charset="utf-8" />
	<title></title>
    <link rel="stylesheet" type="text/css" href="./mentorStyle.css" />
    <style ></style>
	<!--DO NOT FORGET THIS SCRIPT TAG SO YOU CAN USE JQUERY!!!!!-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!--YOUR OWN JAVASCRIPT CAN GO RIGHT HERE-->
	<script type="text/javascript">
		function TestButtonHandler() {
			var webMethod = "ProjectServices.asmx/TestConnection";
			var parameters = "{}";

			//jQuery ajax method
			$.ajax({
				type: "POST",
				url: webMethod,
				data: parameters,
				contentType: "application/json; charset=utf-8",
				dataType: "json",
				success: function (msg) {
					var responseFromServer = msg.d;
					alert(responseFromServer);
				},
				error: function (e) {
					alert("this code will only execute if javascript is unable to access the webservice");
				}
			});
        }

        function LogOn(email, pass) {
            //the url of the webservice we will be talking to
            var webMethod = "ProjectServices.asmx/LogOn";
            //the parameters we will pass the service (in json format because curly braces)
            //note we encode the values for transmission over the web.  All the \'s are just
            //because we want to wrap our keynames and values in double quotes so we have to
            //escape the double quotes (because the overall string we're creating is in double quotes!)
            var parameters = "{\"email\":\"" + encodeURI(email) + "\",\"pass\":\"" + encodeURI(pass) + "\"}";

            //jQuery ajax method
            $.ajax({
                //post is more secure than get, and allows
                //us to send big data if we want.  really just
                //depends on the way the service you're talking to is set up, though
                type: "POST",
                //the url is set to the string we created above
                url: webMethod,
                //same with the data
                data: parameters,
                //these next two key/value pairs say we intend to talk in JSON format
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                //jQuery sends the data and asynchronously waits for a response.  when it
                //gets a response, it calls the function mapped to the success key here
                
                success: function (id) {
                    if (id.d) {
                        //server replied true
                        activeID = id.d;
                        alert("Logged In!")
                        //var x = document.getElementById("buttonsID");
                        LoadUser();
                        var y = document.getElementById("Logon");
                        //x.style.display = "block";
                        y.style.display = "none";

                    }
                    else {
                        //server replied false, so let the user know
                        //the logon failed
                        alert("logon failed");
                    }
                },
                error: function (e) {
                    //if something goes wrong in the mechanics of delivering the
                    //message to the server or the server processing that message,
                    //then this function mapped to the error key is executed rather
                    //than the one mapped to the success key.  This is just a garbage
                    //alert because I'm lazy
                    alert("boo...");
                }
            });
        }

        function LoadUser() {
            var id = activeID;
            console.log(id);
            var webMethod = "ProjectServices.asmx/LoadUser";
            var parameters = "{\"ID\":\"" + encodeURI(id) + "\"}";

            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (id) {

                    var activeUser = id.d;
                    document.getElementById('NavigationBar').style.display = "block";
                    var stmt = "<br><br><br><br>";
                    stmt = stmt + "<iframe src= 'https://calendar.google.com/calendar/embed?src=asu.edu_6p28703btj82p1fvo7o1ld8kv4%40group.calendar.google.com&ctz=America%2FPhoenix' style='border: 0' width='900' height='600' frameborder='0' scrolling='no' align='middle' float='right'></iframe>"
                    document.getElementById("homePage").innerHTML = stmt;
                },
                error: function (e) {
                    console.log(e.responseText);
                    alert("load user error");
                }
            });
        }

        function getSessionId() {
            var webMethod = "ProjectServices.asmx/GetSessionId";
            var parameters = "{}";

            //jQuery ajax method
            $.ajax({
                type: "POST",
                url: webMethod,
                data: parameters,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (msg) {
                    var responseFromServer = msg.d;
                    alert(responseFromServer);
                },
                error: function (e) {
                    alert("this code will only execute if javascript is unable to access the webservice");
                }
            });
        }

	</script>
	<!--END OF YOUR OWN JAVASCRIPT-->

	<!--AND YOUR OWN CSS CAN GO HERE AS WELL-->
      
	<!--END OF YOUR OWN CSS-->
</head >
<body>
    <div id="Logon">
        <a id="logoImage" title="Mentor/ Mentee Program Logo" ><img src="logo.png" class="avator"><br /></a>

        <h1>Login Here</h1>
        <form>

            <p>E-mail</p>
            <input class="log" type="text" placeholder="Enter E-mail" id="email" required>

            <p>Password</p>
            <input class="log" type="password" placeholder="Enter Password" id="psw" required>

            <button id="LogIn" type="button" onclick="LogOn(getElementById('email').value, getElementById('psw').value)">Login</button>
            <a href="newUser.html">Create Account</a>
            <a href="#" id="forgot">Forgot Password</a>
        </form>
    </div>

    <div id="NavigationBar" style="display: none">
        <ul>
            <li id="Ment2BId" onclick="LoadUser()"><a href="#"><img src="logo.png" id="logoImage" align="middle">Ment2B</a></li>
            <li class="navBar"><a href="index.html">Sign out</a></li>
            <li class="navBar"><a href="mentees.html">Connect</a></li>
            <li class="navBar" onclick="loadProfile()"><a href="#">My Profile</a></li>
            <li class="navBar" onclick="MenteeProfile()"><a href="#">My Mentee</a></li>
            <li class="navBar" onclick="MentorProfile()"><a href="#">My Mentor</a></li>
        </ul>
    </div>
</body>
</html >
